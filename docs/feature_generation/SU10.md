# å¤–éƒ¨ãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹å¾´ SU10 ä»•æ§˜ï¼ˆExternal Regime Datasetï¼‰

æœ€çµ‚æ›´æ–°: 2025-12-05

## å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### ä»•æ§˜ç­–å®šæ¸ˆã¿
- âœ… ç›®çš„ãƒ»ä½ç½®ã¥ã‘ã®å®šç¾©
- âœ… å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®é¸å®šï¼ˆS&P 500 / SPYï¼‰
- âœ… date_id ãƒãƒƒãƒ”ãƒ³ã‚°ä»•æ§˜
- âœ… ç‰¹å¾´é‡å®šç¾©ï¼ˆãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ ï¼‰
- âœ… ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆ

### å®Ÿè£…å¾…ã¡
- ğŸ“‹ `src/feature_generation/su10/feature_su10.py`: ç‰¹å¾´é‡ç”Ÿæˆã‚¯ãƒ©ã‚¹
- ğŸ“‹ `src/feature_generation/su10/train_su10.py`: å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- ğŸ“‹ `src/feature_generation/su10/predict_su10.py`: æ¨è«–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- ğŸ“‹ `scripts/su10/build_su10_external_regime.py`: å¤–éƒ¨ãƒ¬ã‚¸ãƒ¼ãƒ CSVç”Ÿæˆ
- ğŸ“‹ `tests/feature_generation/test_su10.py`: å˜ä½“ãƒ†ã‚¹ãƒˆ
- ğŸ“‹ OOFè©•ä¾¡ãƒ»LBæ¤œè¨¼

---

## 1. SU10 ã®ç›®çš„ã¨ä½ç½®ã¥ã‘

### 1.1 ç›®çš„

Hull Tactical Market Prediction ã‚³ãƒ³ãƒšã«ãŠã„ã¦ã€**å¸‚å ´å…¨ä½“ãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ãªã©ï¼‰ã‚’è¡¨ã™å¤–éƒ¨ç‰¹å¾´é‡**ã‚’å°å…¥ã™ã‚‹ã€‚

å¤–éƒ¨ãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹å¾´ã¯ã€å…ƒã® train/test ç”Ÿãƒ‡ãƒ¼ã‚¿ã¨ã¯**ç‹¬ç«‹ã®è»¸**ã§ã‚ã‚Šã€
SU1/SU5 ã«ä»£è¡¨ã•ã‚Œã‚‹ã€Œæ¬ ææ§‹é€ ã€ç³»ç‰¹å¾´ã¨ã¯ç•°ãªã‚‹æƒ…å ±ã‚’ä»˜ä¸ã™ã‚‹ã€‚

### 1.2 SU ã‚·ãƒªãƒ¼ã‚ºã®ä¸­ã§ã® SU10

| SU | è»¸ | èª¬æ˜ | çŠ¶æ…‹ |
|----|-----|------|------|
| SU1 | æ¬ ææ§‹é€  | å˜åˆ—ãƒ¬ãƒ™ãƒ«ã®æ¬ æãƒ•ãƒ©ã‚°ãƒ»run | **æ¡ç”¨** (LB 0.674) |
| SU2 | æ¬ ææ§‹é€  | äºŒæ¬¡æ¬ æç‰¹å¾´ï¼ˆrolling/EWMAï¼‰ | éæ¡ç”¨ï¼ˆéå­¦ç¿’ï¼‰ |
| SU3 | æ¬ ææ§‹é€  | é·ç§»ãƒ»å†å‡ºç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ | éæ¡ç”¨ï¼ˆã‚³ãƒ³ã‚»ãƒ—ãƒˆå¤±æ•—ï¼‰ |
| SU4 | è£œå®Œãƒˆãƒ¬ãƒ¼ã‚¹ | ä»£å…¥å½±éŸ¿ãƒˆãƒ¬ãƒ¼ã‚¹ | å‰Šé™¤æ±ºå®šï¼ˆå¯„ä¸ã‚¼ãƒ­ï¼‰ |
| SU5 | æ¬ ææ§‹é€  | å…±æ¬ æï¼ˆco-missï¼‰æ§‹é€  | **æ¡ç”¨** (LB 0.681) |
| SU6 | æ¬ æè»¸åœ§ç¸® | PCAåœ§ç¸®å€™è£œ | ä¿ç•™ |
| SU7 | ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ  | diff/lag/rolling/RSI | éæ¡ç”¨ï¼ˆãƒ¬ã‚¸ãƒ¼ãƒ ãƒŸã‚¹ãƒãƒƒãƒï¼‰ |
| SU8 | ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ | å±€æ‰€ãƒœãƒ©ãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ ã‚¿ã‚° | éæ¡ç”¨ï¼ˆåŠ¹æœãªã—ï¼‰ |
| SU9 | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | æ›œæ—¥ãƒ»æœˆãƒ»ç¥æ—¥ | éæ¡ç”¨ï¼ˆéå­¦ç¿’ï¼‰ |
| **SU10** | **å¤–éƒ¨ãƒ¬ã‚¸ãƒ¼ãƒ ** | **S&P/VIX ç­‰ã®å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ ** | **ä»•æ§˜ç­–å®šä¸­** |

### 1.3 ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å†…ã§ã®ä½ç½®

```
train.csv / test.csv ã‚’èª­ã¿è¾¼ã¿
    â†“
â˜… SU10 External Regime Dataset ã‚’ date_id ã§ left join â˜…
    â†“
SU1ã€œSU9 ã®ç‰¹å¾´é‡ç”Ÿæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ ON/OFFï¼‰
    â†“
GroupImputersï¼ˆM/E/I/P/S æ¬ æè£œå®Œï¼‰
    â†“
å‰å‡¦ç†ï¼ˆStandardScaler + OneHotï¼‰
    â†“
LightGBM å­¦ç¿’ãƒ»æ¨è«–
```

**SU10 ã¯ã€Œdate_id å˜ä½ã§äº‹å‰è¨ˆç®—ã•ã‚ŒãŸãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹å¾´ãƒ†ãƒ¼ãƒ–ãƒ«ã€ã¨ã—ã¦æ‰±ã„ã€
ãƒ­ãƒ¼ã‚«ãƒ«ãƒ»Kaggle ã®ä¸¡æ–¹ã§åŒä¸€ã® CSV ã‚’ join ã™ã‚‹ã€‚**

---

## 2. å…¥å‡ºåŠ›ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### 2.1 å…¥åŠ›ï¼ˆå¤–éƒ¨ã‚½ãƒ¼ã‚¹ï¼‰

#### åˆ©ç”¨å¯èƒ½ãªå¤–éƒ¨ãƒ‡ãƒ¼ã‚¿

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: [S and P historical data for Hull Tactical competition](https://www.kaggle.com/datasets/ambrosm/s-and-p-historical-data-for-hull-tactical-competition/)

| ã‚½ãƒ¼ã‚¹ | ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ | date_id |
|--------|----------|------|---------|
| SPY ETF | `data/histolical/spy-historical.csv` | S&P 500 ETF æ—¥æ¬¡ OHLCV | ã‚ã‚Š (780ã€œ8989) |
| S&P 500 | `data/histolical/sp-historical.csv` | S&P 500 æŒ‡æ•°æ—¥æ¬¡ OHLCV | ãªã—ï¼ˆDate ã®ã¿ï¼‰ |

#### SPY Historical Data ã‚¹ã‚­ãƒ¼ãƒ

```csv
date_id,Date,Open,High,Low,Close,Adj Close,Volume,Dividend,forward_returns
780,1993-02-01,43.97,44.25,43.97,44.25,24.49,480500.0,0.0,0.0020338983050847137
...
8989,2025-09-11,654.18,658.33,653.59,657.63,655.81,69934400.0,0.0,
```

- **date_id**: ã‚³ãƒ³ãƒšå´ã®ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ‡ãƒ¼IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰
- **Date**: å®Ÿã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ—¥ä»˜
- **Close / Adj Close**: çµ‚å€¤ï¼ˆé…å½“èª¿æ•´å¾Œï¼‰
- **forward_returns**: ç¿Œæ—¥ãƒªã‚¿ãƒ¼ãƒ³

#### ã‚³ãƒ³ãƒšãƒ‡ãƒ¼ã‚¿ã¨ã®æ•´åˆæ€§

| ãƒ‡ãƒ¼ã‚¿ | date_id ç¯„å›² | è¡Œæ•° |
|--------|-------------|------|
| train.csv | 0ã€œ8989 | 8,990 |
| test.csv | 8980ã€œ8989 | 10 |
| spy-historical.csv | 780ã€œ8989 | 8,210 |

**æ³¨æ„**: SPY ã¯ date_id=780 (1993-02-01) ä»¥é™ã®ã¿åˆ©ç”¨å¯èƒ½ã€‚
date_id 0ã€œ779 ã¯ SPY ãƒ‡ãƒ¼ã‚¿ãªã—ï¼ˆNaN ã¾ãŸã¯ fallback å‡¦ç†ãŒå¿…è¦ï¼‰ã€‚

### 2.2 å‡ºåŠ›ï¼ˆSU10 External Regime Datasetï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«å

```
data/processed/su10_external_regime.csv
```

ã¾ãŸã¯ Kaggle Dataset ã¨ã—ã¦:

```
<user>/su10-external-regime/su10_external_regime.csv
```

#### ã‚¹ã‚­ãƒ¼ãƒï¼ˆåˆ—ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰

| åˆ—å | å‹ | èª¬æ˜ |
|------|-----|------|
| `date_id` | int64 | ã‚³ãƒ³ãƒšå´ã®ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ‡ãƒ¼IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰ |
| `su10_spx_ret_5d` | float32 | S&P 5æ—¥ãƒªã‚¿ãƒ¼ãƒ³ |
| `su10_spx_ret_20d` | float32 | S&P 20æ—¥ãƒªã‚¿ãƒ¼ãƒ³ |
| `su10_spx_ewmstd_20d` | float32 | S&P 20æ—¥ EWMA ãƒœãƒ© |
| `su10_spx_ewmstd_60d` | float32 | S&P 60æ—¥ EWMA ãƒœãƒ© |
| `su10_spx_vol_ratio` | float32 | çŸ­æœŸ/é•·æœŸãƒœãƒ©æ¯” |
| `su10_spx_vol_level` | float32 | æ¨™æº–åŒ–ã•ã‚ŒãŸãƒœãƒ©æ°´æº–æŒ‡æ¨™ |
| `su10_spx_vol_regime_low` | uint8 | ãƒœãƒ©ãƒ¬ã‚¸ãƒ¼ãƒ  lowï¼ˆone-hotï¼‰ |
| `su10_spx_vol_regime_mid` | uint8 | ãƒœãƒ©ãƒ¬ã‚¸ãƒ¼ãƒ  midï¼ˆone-hotï¼‰ |
| `su10_spx_vol_regime_high` | uint8 | ãƒœãƒ©ãƒ¬ã‚¸ãƒ¼ãƒ  highï¼ˆone-hotï¼‰ |
| `su10_spx_trend_indicator` | float32 | ãƒˆãƒ¬ãƒ³ãƒ‰æŒ‡æ¨™ï¼ˆMAçŸ­æœŸ-é•·æœŸï¼‰ |
| `su10_spx_trend_regime_down` | uint8 | ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ  downï¼ˆone-hotï¼‰ |
| `su10_spx_trend_regime_flat` | uint8 | ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ  flatï¼ˆone-hotï¼‰ |
| `su10_spx_trend_regime_up` | uint8 | ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ  upï¼ˆone-hotï¼‰ |
| `su10_spx_ret_vol_adj_5d` | float32 | ãƒœãƒ©èª¿æ•´æ¸ˆã¿ 5æ—¥ãƒªã‚¿ãƒ¼ãƒ³ |

**æƒ³å®šåˆ—æ•°**: 15ã€œ20 åˆ—ç¨‹åº¦ï¼ˆS&P ã®ã¿ã®å ´åˆï¼‰

---

## 3. ç‰¹å¾´é‡å®šç¾©

### 3.1 ãƒ™ãƒ¼ã‚¹ç³»åˆ—

```python
# SPY ã®çµ‚å€¤ã¨æ—¥æ¬¡ãƒªã‚¿ãƒ¼ãƒ³
close = spy_df["Adj Close"]
ret = close.pct_change()  # æ—¥æ¬¡ãƒªã‚¿ãƒ¼ãƒ³
```

### 3.2 ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£æŒ‡æ¨™

```python
# EWMA æ¨™æº–åå·®ï¼ˆhalflife ãƒ™ãƒ¼ã‚¹ï¼‰
ewmstd_short = ret.ewm(halflife=20, adjust=False).std()  # çŸ­æœŸãƒœãƒ©
ewmstd_long = ret.ewm(halflife=60, adjust=False).std()   # é•·æœŸãƒœãƒ©

# ãƒœãƒ©æ¯”ç‡
vol_ratio = ewmstd_short / (ewmstd_long + 1e-8)

# ãƒœãƒ©æ°´æº–ï¼ˆæ¨™æº–åŒ–ï¼‰
vol_level = (ewmstd_short - ewmstd_short.mean()) / ewmstd_short.std()
```

### 3.3 ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆ3åŒºåˆ†ï¼‰

```python
# train æœŸé–“ã® vol_level ã‹ã‚‰åˆ†ä½ç‚¹ã‚’ç®—å‡º
q_low = vol_level_train.quantile(0.33)
q_high = vol_level_train.quantile(0.66)

# ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†é¡ï¼ˆone-hot åŒ–ï¼‰
vol_regime_low = (vol_level <= q_low).astype(np.uint8)
vol_regime_mid = ((vol_level > q_low) & (vol_level <= q_high)).astype(np.uint8)
vol_regime_high = (vol_level > q_high).astype(np.uint8)
```

**ãƒªãƒ¼ã‚¯é˜²æ­¢**: åˆ†ä½ç‚¹ `q_low`, `q_high` ã¯ **train æœŸé–“ã®ã¿** ã§ç®—å‡ºã—ã€test ã«ã¯æŒã¡è¶Šã™ã€‚

### 3.4 ãƒˆãƒ¬ãƒ³ãƒ‰æŒ‡æ¨™

```python
# EWMA ç§»å‹•å¹³å‡
ma_short = close.ewm(halflife=20, adjust=False).mean()
ma_long = close.ewm(halflife=60, adjust=False).mean()

# ãƒˆãƒ¬ãƒ³ãƒ‰æŒ‡æ¨™
trend_indicator = ma_short - ma_long
```

### 3.5 ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆ3åŒºåˆ†ï¼‰

```python
# train æœŸé–“ã® trend_indicator ã‹ã‚‰åˆ†ä½ç‚¹ã‚’ç®—å‡º
tau_down = trend_indicator_train.quantile(0.33)
tau_up = trend_indicator_train.quantile(0.66)

# ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†é¡ï¼ˆone-hot åŒ–ï¼‰
trend_regime_down = (trend_indicator <= tau_down).astype(np.uint8)
trend_regime_flat = ((trend_indicator > tau_down) & (trend_indicator <= tau_up)).astype(np.uint8)
trend_regime_up = (trend_indicator > tau_up).astype(np.uint8)
```

### 3.6 æœŸé–“ãƒªã‚¿ãƒ¼ãƒ³

```python
# 5æ—¥ãƒ»20æ—¥ãƒªã‚¿ãƒ¼ãƒ³
ret_5d = close.pct_change(periods=5)
ret_20d = close.pct_change(periods=20)
```

### 3.7 ãƒœãƒ©èª¿æ•´ãƒªã‚¿ãƒ¼ãƒ³

```python
# ãƒœãƒ©èª¿æ•´æ¸ˆã¿ãƒªã‚¿ãƒ¼ãƒ³
eps = 1e-4
denom = 1 + np.maximum(ewmstd_short, eps)
ret_vol_adj_5d = ret_5d / denom

# æ¥µç«¯å€¤ã®ã‚¯ãƒªãƒƒãƒ—ï¼ˆp1, p99ï¼‰
ret_vol_adj_5d = np.clip(
    ret_vol_adj_5d,
    ret_vol_adj_5d.quantile(0.01),
    ret_vol_adj_5d.quantile(0.99)
)
```

### 3.8 åˆ—æ•°ã‚µãƒãƒª

| ã‚«ãƒ†ã‚´ãƒª | ç‰¹å¾´é‡ | åˆ—æ•° |
|----------|--------|------|
| æœŸé–“ãƒªã‚¿ãƒ¼ãƒ³ | ret_5d, ret_20d | 2 |
| ãƒœãƒ©æŒ‡æ¨™ | ewmstd_20d, ewmstd_60d, vol_ratio, vol_level | 4 |
| ãƒœãƒ©ãƒ¬ã‚¸ãƒ¼ãƒ  | low, mid, high | 3 |
| ãƒˆãƒ¬ãƒ³ãƒ‰æŒ‡æ¨™ | trend_indicator | 1 |
| ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ  | down, flat, up | 3 |
| ãƒœãƒ©èª¿æ•´ãƒªã‚¿ãƒ¼ãƒ³ | ret_vol_adj_5d | 1 |
| **åˆè¨ˆ** | | **14åˆ—** |

---

## 4. é‹ç”¨æ–¹å¼ï¼ˆæ–¹å¼B: äº‹å‰çµåˆæ¸ˆã¿CSVï¼‰

### 4.1 ã‚³ãƒ³ãƒšæ§‹é€ ã®ç†è§£

æœ¬ã‚³ãƒ³ãƒšã® `test.csv` ã«ã¤ã„ã¦ï¼š

- **å…¬é–‹ test.csv**: 10è¡Œã®**æ§‹é€ ã‚µãƒ³ãƒ—ãƒ«ï¼ˆmockï¼‰** ã§ã‚ã‚Šã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã«ã¯ä½¿ã‚ã‚Œãªã„
- **éå…¬é–‹ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆ**: 180è¡Œã§ã€APIçµŒç”±ã§ Kaggle å´ãŒå†…éƒ¨ã§è©•ä¾¡ã«ä½¿ç”¨
- å…¬é–‹ test.csv ã¯å›ºå®šã§ã‚ã‚Šã€ã‚³ãƒ³ãƒšæœŸé–“ä¸­ã«å¤‰æ›´ã•ã‚Œã‚‹å‰æã¯ãªã„

ã“ã®æ§‹é€ ã‚’è¸ã¾ãˆã€**æ–¹å¼Bï¼ˆäº‹å‰çµåˆæ¸ˆã¿CSVï¼‰** ã‚’æ¡ç”¨ã™ã‚‹ã€‚

### 4.2 æ–¹å¼Bã®æ¦‚è¦

```
ã€ãƒ­ãƒ¼ã‚«ãƒ«å´ã€‘
1. train.csv + spy-historical.csv â†’ train_with_su10.csv ã‚’ä½œæˆ
2. test.csv + spy-historical.csv â†’ test_with_su10.csv ã‚’ä½œæˆï¼ˆ10è¡Œãƒ»æ§‹é€ ç¢ºèªç”¨ï¼‰
3. train_with_su10.csv ã§å­¦ç¿’ â†’ inference_bundle.pkl ç”Ÿæˆ

ã€Kaggle Dataset ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€‘
- inference_bundle.pkl
- model_meta.json
- feature_list.json
- su10_external_regime.csvï¼ˆdate_id â†’ SU10ç‰¹å¾´ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

ã€Kaggle NB æ¨è«–æ™‚ï¼ˆAPIãƒ¢ãƒ¼ãƒ‰ï¼‰ã€‘
1. API ã‹ã‚‰æ¸¡ã•ã‚Œã‚‹ test DataFrame ã‚’å—ã‘å–ã‚‹ï¼ˆéå…¬é–‹180è¡Œï¼‰
2. su10_external_regime.csv ã¨ date_id ã§ join
3. inference_bundle.pkl ã§æ¨è«–
4. äºˆæ¸¬å€¤ã‚’è¿”ã™
```

### 4.3 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨ Kaggle ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾è±¡

| ãƒ•ã‚¡ã‚¤ãƒ« | ç”¨é€” | ä¿å­˜å…ˆ | Kaggle ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |
|----------|------|--------|---------------------|
| `train_with_su10.csv` | ãƒ­ãƒ¼ã‚«ãƒ«å­¦ç¿’ç”¨ï¼ˆäº‹å‰çµåˆæ¸ˆã¿ï¼‰ | `data/processed/` | âŒ **ä¸è¦** |
| `test_with_su10.csv` | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç”¨ï¼ˆ10è¡Œã€æ§‹é€ ç¢ºèªï¼‰ | `data/processed/` | âŒ **ä¸è¦** |
| `su10_external_regime.csv` | Kaggle NB æ¨è«–æ™‚ã® join ç”¨ãƒãƒƒãƒ”ãƒ³ã‚° | `data/processed/` | âœ… **å¿…é ˆ** |
| `inference_bundle.pkl` | å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ« | `artifacts/SU10/` | âœ… **å¿…é ˆ** |
| `model_meta.json` | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ | `artifacts/SU10/` | âœ… **å¿…é ˆ** |
| `feature_list.json` | ç‰¹å¾´é‡ãƒªã‚¹ãƒˆ | `artifacts/SU10/` | âœ… **å¿…é ˆ** |

**é‡è¦**: `test_with_su10.csv` ã¯ Kaggle ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**ã—ãªã„**ã€‚
APIãƒ¢ãƒ¼ãƒ‰ã§ã¯éå…¬é–‹ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆï¼ˆ180è¡Œï¼‰ãŒ `predict()` é–¢æ•°ã«æ¸¡ã•ã‚Œã‚‹ãŸã‚ã€
æ¨è«–æ™‚ã« `su10_external_regime.csv` ã‚’ä½¿ã£ã¦ join ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### 4.4 ç”Ÿæˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```
1. SPY Historical Data ã‚’èª­ã¿è¾¼ã¿
   â””â”€ data/histolical/spy-historical.csv

2. ç‰¹å¾´é‡ã‚’è¨ˆç®—
   â”œâ”€ ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£æŒ‡æ¨™ï¼ˆEWMA stdï¼‰
   â”œâ”€ ãƒœãƒ©ãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆtrain æœŸé–“ã®åˆ†ä½ç‚¹ã§åˆ†é¡ï¼‰
   â”œâ”€ ãƒˆãƒ¬ãƒ³ãƒ‰æŒ‡æ¨™ï¼ˆMA å·®åˆ†ï¼‰
   â”œâ”€ ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆtrain æœŸé–“ã®åˆ†ä½ç‚¹ã§åˆ†é¡ï¼‰
   â””â”€ ãƒœãƒ©èª¿æ•´ãƒªã‚¿ãƒ¼ãƒ³

3. su10_external_regime.csv ã‚’å‡ºåŠ›
   â””â”€ date_id ã‚’ä¸»ã‚­ãƒ¼ã¨ã™ã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«

4. train/test ã¨çµåˆ
   â”œâ”€ train.csv + su10 â†’ train_with_su10.csv
   â””â”€ test.csv + su10 â†’ test_with_su10.csv

5. Kaggle Dataset ã¨ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   â””â”€ su10_external_regime.csv + å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«
```

### 4.5 ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ§‹æˆ

```
scripts/su10/
â”œâ”€â”€ build_su10_external_regime.py   # su10_external_regime.csv ç”Ÿæˆ
â”œâ”€â”€ merge_train_test.py             # train/test ã¨ã®çµåˆ
â””â”€â”€ upload_kaggle_dataset.py        # Kaggle Dataset ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆä»»æ„ï¼‰
```

---

## 5. ãƒ­ãƒ¼ã‚«ãƒ«å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®åˆ©ç”¨

### 5.1 äº‹å‰çµåˆæ¸ˆã¿ CSV ã®åˆ©ç”¨

```python
import pandas as pd

# äº‹å‰çµåˆæ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥èª­ã¿è¾¼ã¿
train = pd.read_csv("data/processed/train_with_su10.csv")

# ä»¥é™ã¯æ—¢å­˜ã® SU1ã€œSU9 ç”Ÿæˆãƒ»å‰å‡¦ç†ãƒ»ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ãƒ•ãƒ­ãƒ¼ã‚’ãã®ã¾ã¾é©ç”¨
```

### 5.2 çµåˆå‡¦ç†ï¼ˆåˆå›ã®ã¿ï¼‰

```python
import pandas as pd

# ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
train = pd.read_csv("data/raw/train.csv")
test = pd.read_csv("data/raw/test.csv")
su10 = pd.read_csv("data/processed/su10_external_regime.csv")

# left joinï¼ˆdate_id ã‚’ã‚­ãƒ¼ã«ï¼‰
train_with_su10 = train.merge(su10, on="date_id", how="left")
test_with_su10 = test.merge(su10, on="date_id", how="left")

# ä¿å­˜
train_with_su10.to_csv("data/processed/train_with_su10.csv", index=False)
test_with_su10.to_csv("data/processed/test_with_su10.csv", index=False)
```

### 5.2 æ¬ æå€¤ã®æ‰±ã„

- date_id 0ã€œ779 ã¯ SPY ãƒ‡ãƒ¼ã‚¿ãªã— â†’ SU10 åˆ—ã¯ NaN
- LightGBM ã¯ NaN ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã«å‡¦ç†å¯èƒ½
- å¿…è¦ã«å¿œã˜ã¦ 0 åŸ‹ã‚ or ä¸­å¤®å€¤è£œå®Œã‚‚æ¤œè¨

### 5.3 ç‰¹å¾´é¸æŠãƒ»å‰å‡¦ç†

`configs/feature_generation.yaml` ã« SU10 ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ :

```yaml
su10:
  enabled: true
  external_data_path: data/histolical/spy-historical.csv
  output_path: data/processed/su10_external_regime.csv
  id_column: date_id
  
  # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£è¨­å®š
  volatility:
    ewm_halflife_short: 20
    ewm_halflife_long: 60
    quantile_low: 0.33
    quantile_high: 0.66
  
  # ãƒˆãƒ¬ãƒ³ãƒ‰è¨­å®š
  trend:
    ewm_halflife_short: 20
    ewm_halflife_long: 60
    quantile_down: 0.33
    quantile_up: 0.66
  
  # ãƒªã‚¿ãƒ¼ãƒ³è¨­å®š
  returns:
    periods: [5, 20]
    vol_adj_period: 5
    winsorize_quantiles: [0.01, 0.99]
  
  # åˆ—ã®åˆ†é¡
  numeric_cols:
    - su10_spx_ret_5d
    - su10_spx_ret_20d
    - su10_spx_ewmstd_20d
    - su10_spx_ewmstd_60d
    - su10_spx_vol_ratio
    - su10_spx_vol_level
    - su10_spx_trend_indicator
    - su10_spx_ret_vol_adj_5d
  
  categorical_cols:
    - su10_spx_vol_regime_low
    - su10_spx_vol_regime_mid
    - su10_spx_vol_regime_high
    - su10_spx_trend_regime_down
    - su10_spx_trend_regime_flat
    - su10_spx_trend_regime_up
  
  metadata:
    artifacts_dir: artifacts/SU10
    depends_on: []
    expected_usage: "External market regime features (S&P 500 volatility/trend)"
    numpy_version: 1.26.4
    status: pending
    decision: pending
```

---

## 6. Kaggle Notebookï¼ˆæ¨è«–ï¼‰ã§ã®åˆ©ç”¨

### 6.1 ã‚³ãƒ³ãƒšã®è©•ä¾¡æ§‹é€ 

- æœ¬ã‚³ãƒ³ãƒšã¯ **APIãƒ¢ãƒ¼ãƒ‰**ï¼ˆ`DefaultInferenceServer`ï¼‰ã§è©•ä¾¡ã•ã‚Œã‚‹
- `predict(test: pl.DataFrame) -> float` é–¢æ•°ãŒå‘¼ã°ã‚Œã€éå…¬é–‹ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆï¼ˆ180è¡Œï¼‰ãŒæ¸¡ã•ã‚Œã‚‹
- å…¬é–‹ test.csvï¼ˆ10è¡Œï¼‰ã¯ãƒ¢ãƒƒã‚¯ï¼ˆæ§‹é€ ã‚µãƒ³ãƒ—ãƒ«ï¼‰ã§ã‚ã‚Šã€è©•ä¾¡ã«ã¯ä½¿ã‚ã‚Œãªã„

### 6.2 å…¥åŠ› Dataset æ§‹æˆ

Kaggle Notebook ã§ã¯ä»¥ä¸‹ã‚’å…¥åŠ›ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã™ã‚‹:

1. **å…¬å¼ã‚³ãƒ³ãƒš Dataset**: `train.csv`, `test.csv` ç­‰ï¼ˆAPIãƒ¢ãƒ¼ãƒ‰ã§ã¯ç›´æ¥ä½¿ã‚ãªã„ï¼‰
2. **å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ« Dataset**:
   - `inference_bundle.pkl`
   - `feature_list.json`
   - `model_meta.json`
   - `su10_external_regime.csv`ï¼ˆjoin ç”¨ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

### 6.3 APIãƒ¢ãƒ¼ãƒ‰ã§ã®æ¨è«–å®Ÿè£…

```python
import polars as pl
import pandas as pd
import joblib
import json

# ãƒ¢ãƒ‡ãƒ«ã¨SU10ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ãƒ­ãƒ¼ãƒ‰ï¼ˆNotebookåˆæœŸåŒ–æ™‚ï¼‰
bundle = joblib.load("/kaggle/input/su10-model/inference_bundle.pkl")
with open("/kaggle/input/su10-model/feature_list.json") as f:
    feature_list = json.load(f)
su10 = pd.read_csv("/kaggle/input/su10-model/su10_external_regime.csv")

def predict(test: pl.DataFrame) -> float:
    """
    APIãƒ¢ãƒ¼ãƒ‰ã§å‘¼ã°ã‚Œã‚‹æ¨è«–é–¢æ•°
    test: éå…¬é–‹ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆï¼ˆ180è¡Œï¼‰ãŒæ¸¡ã•ã‚Œã‚‹
    """
    # Polars â†’ Pandas å¤‰æ›
    test_pd = test.to_pandas()
    
    # SU10 ã‚’ date_id ã§ join
    test_pd = test_pd.merge(su10, on="date_id", how="left")
    
    # ç‰¹å¾´é‡ã‚’æƒãˆã¦æ¨è«–
    X_test = test_pd[feature_list]
    prediction = bundle["pipeline"].predict(X_test)
    
    # 1è¡Œãšã¤å‘¼ã°ã‚Œã‚‹ãŸã‚ã€ã‚¹ã‚«ãƒ©ãƒ¼ã§è¿”ã™
    return float(prediction[0])
```

### 6.4 é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **su10_external_regime.csv ã¯å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã¨ä¸€ç·’ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**
   - date_id 0ã€œ8989 ã®å…¨ç¯„å›²ã‚’ã‚«ãƒãƒ¼
   - éå…¬é–‹ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã® date_id ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ã‚ã‚Š

2. **APIãƒ¢ãƒ¼ãƒ‰ã§ã¯ test.csv ã‚’ç›´æ¥èª­ã¾ãªã„**
   - `predict()` é–¢æ•°ã«æ¸¡ã•ã‚Œã‚‹ `test` DataFrame ã‚’ä½¿ç”¨
   - éå…¬é–‹ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆï¼ˆ180è¡Œï¼‰ãŒé€æ¬¡æ¸¡ã•ã‚Œã‚‹

3. **join ã¯æ¨è«–æ™‚ã«å®Ÿè¡Œ**
   - äº‹å‰çµåˆæ¸ˆã¿ test_with_su10.csv ã¯**ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç”¨**
   - Kaggle NB ã§ã¯ su10_external_regime.csv ã‚’ join ç”¨ãƒãƒƒãƒ”ãƒ³ã‚°ã¨ã—ã¦ä½¿ç”¨

---

## 7. åˆ¶ç´„ãƒ»æ³¨æ„äº‹é …

### 7.1 è¦ç´„é †å®ˆ

- åˆ©ç”¨ã™ã‚‹å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã¯ **ã€Œå…¬é–‹ãƒ»è‡ªç”±ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€** ã§ã‚ã‚‹ã“ã¨
- ä»–å‚åŠ è€…ã‚‚å†ç¾å¯èƒ½ãªå½¢ã§å…±æœ‰ã™ã‚‹ã“ã¨
- Kaggle Dataset ã¨ã—ã¦å…¬é–‹ or ã‚³ãƒ³ãƒšãƒ«ãƒ¼ãƒ«ã«å¾“ã£ãŸå½¢ã§å…±æœ‰ã™ã‚‹ã“ã¨

### 7.2 ãƒªãƒ¼ã‚¯é˜²æ­¢

- **t æ™‚ç‚¹ã® SU10 ç‰¹å¾´ã¯ t ã¾ã§ã®æƒ…å ±ã®ã¿ã‹ã‚‰è¨ˆç®—ã™ã‚‹ã“ã¨**
- æœªæ¥ã®ä¾¡æ ¼ãƒ»æŒ‡æ¨™ãƒ»ãƒªãƒ“ã‚¸ãƒ§ãƒ³å¾Œãƒ‡ãƒ¼ã‚¿ã¯ä¸€åˆ‡ä½¿ã‚ãªã„
- EWMA/rolling ã¯ã€Œæ™‚åˆ» t ã¾ã§ã®éå»ã®ã¿ã€ã‚’å‚ç…§ã™ã‚‹
- ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†é¡ã®åˆ†ä½ç‚¹ã¯ **train æœŸé–“ã®ã¿** ã§ fit ã—ã€test ã«ã¯æŒã¡è¶Šã™

### 7.3 å†ç¾æ€§

- SU10 ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`scripts/su10/build_su10_external_regime.py`ï¼‰ã¯ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆ
- ã©ã®å¤–éƒ¨ã‚½ãƒ¼ã‚¹ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ SU10 ãŒä½œã‚‰ã‚ŒãŸã‹ã‚’æ˜ç¤ºã™ã‚‹
- `model_meta.json` ã« SU10 ã® Dataset åãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¿…ãšè¨˜éŒ²ã™ã‚‹:
  ```json
  {
    "su10": {
      "enabled": true,
      "dataset_version": 1,
      "feature_list": ["su10_spx_ret_5d", "su10_spx_vol_level", ...]
    }
  }
  ```

### 7.4 åˆ—æ•°ãƒ»è¤‡é›‘æ€§

- SU10 ã¯ **10ã€œ30 åˆ—ç¨‹åº¦** ã«æŠ‘ãˆã‚‹
- ä»– SUï¼ˆç‰¹ã« SU7/SU8/SU9ï¼‰ã¨ã®ä½µç”¨æ™‚ã§ã‚‚å…¨ä½“ã®åˆ—æ•°ãŒéå¤§ã«ãªã‚‰ãªã„ã‚ˆã†ç®¡ç†ã™ã‚‹
- ã¾ãšã¯ S&P å˜ç‹¬ã§åŠ¹æœã‚’æ¤œè¨¼ã—ã€åŠ¹æœãŒç¢ºèªã•ã‚Œã¦ã‹ã‚‰æ‹¡å¼µã‚’æ¤œè¨ã™ã‚‹

---

## 8. ã‚¯ãƒ©ã‚¹æ§‹æˆï¼ˆæƒ³å®šï¼‰

### 8.1 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/feature_generation/su10/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ feature_su10.py     # SU10Config, SU10FeatureGenerator
â”œâ”€â”€ train_su10.py       # å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â””â”€â”€ predict_su10.py     # æ¨è«–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

scripts/su10/
â”œâ”€â”€ build_su10_external_regime.py   # CSV ç”Ÿæˆ
â””â”€â”€ upload_kaggle_dataset.py        # Kaggle ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

tests/feature_generation/
â””â”€â”€ test_su10.py        # å˜ä½“ãƒ†ã‚¹ãƒˆ
```

### 8.2 ã‚¯ãƒ©ã‚¹è¨­è¨ˆ

```python
@dataclass
class SU10Config:
    """SU10 External Regime è¨­å®š"""
    external_data_path: str = "data/histolical/spy-historical.csv"
    output_path: str = "data/processed/su10_external_regime.csv"
    id_column: str = "date_id"
    
    # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£è¨­å®š
    ewm_halflife_short: int = 20
    ewm_halflife_long: int = 60
    vol_quantile_low: float = 0.33
    vol_quantile_high: float = 0.66
    
    # ãƒˆãƒ¬ãƒ³ãƒ‰è¨­å®š
    trend_ewm_halflife_short: int = 20
    trend_ewm_halflife_long: int = 60
    trend_quantile_down: float = 0.33
    trend_quantile_up: float = 0.66
    
    # ãƒªã‚¿ãƒ¼ãƒ³è¨­å®š
    return_periods: list = field(default_factory=lambda: [5, 20])
    vol_adj_period: int = 5
    winsorize_low: float = 0.01
    winsorize_high: float = 0.99


class SU10FeatureGenerator:
    """å¤–éƒ¨ãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹å¾´ç”Ÿæˆã‚¯ãƒ©ã‚¹"""
    
    def __init__(self, config: SU10Config):
        self.config = config
        self.vol_quantiles_: Optional[Tuple[float, float]] = None
        self.trend_quantiles_: Optional[Tuple[float, float]] = None
    
    def fit(self, external_df: pd.DataFrame, train_date_ids: np.ndarray) -> "SU10FeatureGenerator":
        """train æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åˆ†ä½ç‚¹ã‚’ç®—å‡º"""
        ...
    
    def transform(self, external_df: pd.DataFrame) -> pd.DataFrame:
        """å¤–éƒ¨ãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹å¾´ã‚’ç”Ÿæˆ"""
        ...
    
    def fit_transform(self, external_df: pd.DataFrame, train_date_ids: np.ndarray) -> pd.DataFrame:
        """fit + transform"""
        return self.fit(external_df, train_date_ids).transform(external_df)
```

---

## 9. PoC ã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹é‡

### 9.1 å°å…¥é †

1. SU10 External Regime Dataset ã‚’ç”Ÿæˆï¼ˆS&P ã®ã¿ï¼‰
2. SU1+SU5+SU10 ã§ OOF è©•ä¾¡
3. OOF æ”¹å–„ãŒç¢ºèªã•ã‚ŒãŸã‚‰ LB æå‡ºï¼ˆæœ€å¤§1å›ï¼‰

### 9.2 è©•ä¾¡æŒ‡æ¨™

- **ä¸»æŒ‡æ¨™**: OOF RMSEï¼ˆä½ã„ã»ã©è‰¯ã„ï¼‰
- **å‰¯æŒ‡æ¨™**: OOF MSR / MSR_downï¼ˆé«˜ã„ã»ã©è‰¯ã„ï¼‰
- **ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³**: SU1+SU5 (LB 0.681)

### 9.3 ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ¡ä»¶

- OOF æ”¹å–„ãŒ **fold é–“åˆ†æ•£ã‚’è€ƒæ…®ã—ã¦ +0.3ã€œ0.5Ïƒ æœªæº€** ã®å ´åˆã¯ SU10 ã‚’ã‚ªãƒ•ã«æˆ»ã™
- LB ã§æ˜ç¢ºã«æ‚ªã„å ´åˆï¼ˆ0.681 æœªæº€ï¼‰ã¯å³åº§ã«éæ¡ç”¨
- SU7/SU8/SU9 ã®æ•™è¨“: **OOF æ”¹å–„ â‰  LB æ”¹å–„** ã®ãŸã‚ã€LB çµæœã‚’æœ€çµ‚åˆ¤æ–­åŸºæº–ã¨ã™ã‚‹

### 9.4 SU7/SU8/SU9 ã¨ã®é•ã„

| SU | æƒ…å ±æº | ãƒªã‚¹ã‚¯ | SU10ã¨ã®é•ã„ |
|----|--------|--------|--------------|
| SU7 | å†…éƒ¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ  | ãƒ¬ã‚¸ãƒ¼ãƒ ãƒŸã‚¹ãƒãƒƒãƒ | SU10ã¯å¤–éƒ¨å¸‚å ´æƒ…å ± |
| SU8 | å†…éƒ¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒœãƒ© | æƒ…å ±ã®é‡è¤‡ | SU10ã¯å¤–éƒ¨å¸‚å ´æƒ…å ± |
| SU9 | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æƒ…å ± | éå­¦ç¿’ | SU10ã¯å¸‚å ´å®Ÿç¸¾ãƒ™ãƒ¼ã‚¹ |
| SU10 | å¤–éƒ¨å¸‚å ´ãƒ‡ãƒ¼ã‚¿ | æ–°è¦æƒ…å ±è»¸ | train/test ã¨ç‹¬ç«‹ |

**æœŸå¾…**: å¤–éƒ¨å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã¯ train/test å†…éƒ¨ãƒ‡ãƒ¼ã‚¿ã¨ã¯ç•°ãªã‚‹æƒ…å ±è»¸ã®ãŸã‚ã€éå­¦ç¿’ãƒªã‚¹ã‚¯ãŒä½ã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

---

## 10. ä»Šå¾Œã®æ‹¡å¼µ

### 10.1 è¿½åŠ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹å€™è£œ

| ã‚½ãƒ¼ã‚¹ | èª¬æ˜ | å„ªå…ˆåº¦ |
|--------|------|--------|
| VIX | ææ€–æŒ‡æ•° | é«˜ |
| é‡‘åˆ©ï¼ˆFREDï¼‰ | é•·çŸ­é‡‘åˆ©å·®ãƒ»ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ | ä¸­ |
| ã‚»ã‚¯ã‚¿ãƒ¼ ETF | ã‚»ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ | ä½ |
| ã‚³ãƒ¢ãƒ‡ã‚£ãƒ†ã‚£ | é‡‘ãƒ»åŸæ²¹ãªã© | ä½ |

### 10.2 è¿½åŠ ç‰¹å¾´é‡å€™è£œ

- ãƒã‚¯ãƒ­ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ï¼ˆä¾‹: 10Y-2Y é‡‘åˆ©å·®ï¼‰
- VIX ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚¸ãƒ¼ãƒ ã‚¿ã‚°
- ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ  ID

### 10.3 æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

1. **Phase 1**: S&P 500 / SPY ã®ã¿ã§åŠ¹æœæ¤œè¨¼ï¼ˆæœ¬ä»•æ§˜æ›¸ï¼‰
2. **Phase 2**: VIX è¿½åŠ ï¼ˆåŠ¹æœç¢ºèªå¾Œï¼‰
3. **Phase 3**: ãƒã‚¯ãƒ­æŒ‡æ¨™è¿½åŠ ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

---

## 11. å‚ç…§

- `docs/feature_generation/SU8.md`: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹å¾´ï¼ˆå†…éƒ¨ãƒ‡ãƒ¼ã‚¿ç‰ˆï¼‰
- `docs/feature_generation/SU7.md`: ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ãƒ»ãƒªãƒãƒ¼ã‚µãƒ«ç‰¹å¾´
- `docs/feature_generation/SU9.md`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»å­£ç¯€æ€§ç‰¹å¾´
- `configs/feature_generation.yaml`: ç‰¹å¾´é‡ç”Ÿæˆè¨­å®š
- `data/histolical/spy-historical.csv`: SPY æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿ï¼ˆdate_id ãƒãƒƒãƒ”ãƒ³ã‚°æ¸ˆã¿ï¼‰
- `data/histolical/sp-historical.csv`: S&P 500 æŒ‡æ•°æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿
